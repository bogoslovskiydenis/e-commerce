# Документация E-commerce системы

## Содержание
1. [Система аутентификации](#система-аутентификации)
2. [Админ панель - Управление товарами](#админ-панель---управление-товарами)
3. [Редактирование сайта](#редактирование-сайта)
4. [Главная страница](#главная-страница)
5. [Фильтры для товаров](#фильтры-для-товаров)
6. [Создание PDF при покупке](#создание-pdf-при-покупке)
7. [Аналитика заказов и продаж](#аналитика-заказов-и-продаж)
8. [Управление заказами](#управление-заказами)
9. [Управление клиентами](#управление-клиентами)
10. [Система отзывов и комментариев](#система-отзывов-и-комментариев)
11. [Обратные звонки](#обратные-звонки)
12. [Корзина и оформление заказа](#корзина-и-оформление-заказа)
13. [Система ролей и разрешений](#система-ролей-и-разрешений)
14. [API Endpoints](#api-endpoints)

---

## Система аутентификации

### Два типа логина

Система поддерживает два независимых типа входа:

#### 1. Логин в админ панели
**URL:** `http://localhost:3000` (Admin Panel)

**Назначение:** Доступ к административной панели для управления контентом, товарами, заказами и настройками системы.

**Особенности:**
- Использует JWT токены для авторизации
- Поддержка двухфакторной аутентификации (2FA)
- Роли пользователей: `SUPER_ADMIN`, `ADMINISTRATOR`, `MANAGER`, `CRM_MANAGER`
- Система разрешений (permissions) для контроля доступа
- Логирование всех действий администраторов

**API Endpoint:**
```
POST /api/auth/login
```

**Тело запроса:**
```json
{
  "username": "admin",
  "password": "password123",
  "twoFactorCode": "123456" // опционально, если включена 2FA
}
```

**Ответ:**
```json
{
  "success": true,
  "data": {
    "user": {
      "id": "uuid",
      "username": "admin",
      "email": "admin@example.com",
      "fullName": "Администратор",
      "role": "SUPER_ADMIN",
      "permissions": ["products.create", "products.edit", "products.delete"],
      "isActive": true,
      "twoFactorEnabled": false
    },
    "token": "jwt-access-token",
    "refreshToken": "jwt-refresh-token"
  }
}
```

**Использование токена:**
Все запросы к защищенным endpoints требуют заголовок:
```
Authorization: Bearer {token}
```

#### 2. Логин на сайте (фронтенд)
**URL:** `http://localhost:3010/login` (E-commerce UI)

**Назначение:** Вход для обычных пользователей (покупателей) на сайте интернет-магазина.

**Особенности:**
- Отдельная система аутентификации для клиентов
- Регистрация новых пользователей
- Восстановление пароля
- Управление личным кабинетом
- История заказов

**Текущий статус:** Форма логина реализована в UI, но требует интеграции с API для клиентов (Customer model).

---

## Админ панель - Управление товарами

### Обзор функционала

Админ панель предоставляет полный набор инструментов для управления товарами интернет-магазина.

**Доступ:** После успешного входа в админ панель, раздел "Товары" доступен в меню навигации.

### Основные возможности

#### 1. Просмотр списка товаров

**Путь:** `/products` в админ панели

**Функционал:**
- Таблица со всеми товарами
- Фильтрация по:
  - Названию, артикулу (SKU), бренду
  - Категории
  - Статусу активности
  - Наличию на складе
- Поиск по всем полям товара
- Сортировка по дате создания (по умолчанию)
- Пагинация (10 товаров на страницу)
- Экспорт данных

**Отображаемые поля:**
- Артикул (SKU)
- Изображение товара
- Название
- Бренд
- Цена (₴)
- Старая цена (₴)
- Скидка (%)
- Категория
- Статус активности
- Наличие на складе
- Кнопка редактирования

#### 2. Создание нового товара

**Путь:** `/products/create` в админ панели

**Обязательные поля:**
- Название товара (`title`)
- Цена (`price`)
- Категория (`categoryId`)

**Дополнительные поля:**
- Артикул (SKU) - если не указан, генерируется автоматически
- Бренд (`brand`)
- Старая цена (`oldPrice`)
- Скидка в процентах (`discount`)
- Описание (`description`)
- Изображение товара (`image`) - загрузка через drag & drop или выбор файла
- Статус активности (`isActive`) - по умолчанию `true`
- Наличие на складе (`inStock`) - по умолчанию `true`
- Количество на складе (`stockQuantity`) - по умолчанию `0`

**Процесс создания:**
1. Заполнение формы с валидацией
2. Выбор категории из списка
3. Загрузка изображения (опционально)
4. Сохранение товара
5. Автоматическая генерация slug из названия
6. Редирект на страницу редактирования

#### 3. Редактирование товара

**Путь:** `/products/:id` в админ панели

**Функционал:**
- Редактирование всех полей товара
- Изменение изображения
- Изменение категории
- Обновление цен и скидок
- Управление статусами (активность, наличие)

**Особенности:**
- ID товара отображается, но не редактируется
- Все изменения логируются в системе
- Валидация данных перед сохранением

#### 4. Просмотр детальной информации

**Путь:** `/products/:id/show` в админ панели

**Отображаемая информация:**
- Полная информация о товаре
- Путь к изображению
- Даты создания и обновления
- Все связанные данные (категория, цены, статусы)

### Структура данных товара

```typescript
interface Product {
  id: string;                    // UUID
  title: string;                  // Название товара
  slug: string;                   // URL-friendly идентификатор
  description?: string;           // Полное описание
  shortDescription?: string;       // Краткое описание
  price: number;                  // Цена в гривнах
  oldPrice?: number;              // Старая цена (для отображения скидки)
  discount?: number;              // Процент скидки (0-100)
  categoryId: string;            // ID категории
  brand?: string;                // Бренд
  sku?: string;                  // Артикул (уникальный)
  images: string[];              // Массив путей к изображениям
  attributes?: object;            // Дополнительные атрибуты (JSON)
  tags: string[];                // Теги для поиска
  isActive: boolean;             // Активен ли товар
  inStock: boolean;              // Есть ли в наличии
  stockQuantity: number;         // Количество на складе
  featured: boolean;             // Рекомендуемый товар
  weight?: number;               // Вес в граммах
  dimensions?: object;           // Размеры {length, width, height}
  createdAt: Date;              // Дата создания
  updatedAt: Date;              // Дата обновления
}
```

### Разрешения (Permissions)

Для работы с товарами требуются следующие разрешения:

- `products.create` - создание товаров
- `products.edit` - редактирование товаров
- `products.delete` - удаление товаров
- `products.view` - просмотр товаров (базовое разрешение)

**Проверка разрешений:**
- Все операции создания/редактирования/удаления защищены guards
- При отсутствии разрешения возвращается ошибка 403 Forbidden

---

## Редактирование сайта

### Обзор функционала

Админ панель предоставляет полный набор инструментов для настройки и редактирования сайта без необходимости изменения кода.

**Доступ:** Раздел "Сайт" в меню админ панели содержит все инструменты для управления контентом сайта.

### Основные разделы редактирования

#### 1. Настройки сайта

**Путь:** `/settings` в админ панели

**Функционал:**
Настройки сайта организованы в виде вкладок:

**Основные настройки:**
- Название сайта
- Описание сайта
- Ключевые слова для SEO
- Загрузка логотипа
- Загрузка фавикона

**Дизайн:**
- Основной цвет (primary color)
- Вторичный цвет (secondary color)
- Акцентный цвет
- Настройка шрифтов
- Предпросмотр цветовой схемы

**Контакты:**
- Основной телефон
- Дополнительный телефон
- Email для связи
- Email поддержки
- Адрес компании
- Режим работы
- Ссылки на социальные сети (Facebook, Instagram, Telegram, Viber, YouTube, TikTok)

**SEO и аналитика:**
- Google Analytics ID
- Google Tag Manager ID
- Facebook Pixel ID
- Яндекс.Метрика ID

**Доставка:**
- Минимальная сумма для бесплатной доставки
- Стоимость доставки
- Время доставки
- Дополнительная информация о доставке

**Оплата:**
- Настройка способов оплаты
- Поддержка популярных платежных систем (Monobank, PrivatBank, LiqPay, Fondy и др.)

**Разрешения:** `website.settings`

#### 2. Баннеры

**Путь:** `/banners` в админ панели

**Функционал:**
- Создание и редактирование баннеров для различных позиций на сайте
- Управление изображениями (основное и для мобильных устройств)
- Настройка периода показа (дата начала и окончания)
- Управление порядком отображения

**Позиции баннеров:**
- `main` - Главная страница
- `category` - Страницы категорий
- `sidebar` - Боковая панель
- `footer` - Футер
- `popup` - Всплывающее окно

**Поля баннера:**
- Заголовок (обязательно)
- Подзаголовок
- Описание
- Текст кнопки
- Ссылка кнопки
- Основное изображение
- Изображение для мобильных устройств
- Позиция на сайте
- Порядок сортировки
- Статус активности
- Дата начала показа
- Дата окончания показа

**Статусы баннера:**
- Активен - отображается на сайте
- Запланирован - будет показан в будущем
- Истек - период показа закончился
- Неактивен - скрыт на сайте

**Разрешения:** `website.banners`

#### 3. Навигация сайта

**Путь:** `/navigation` в админ панели

**Функционал:**
- Создание и редактирование пунктов меню
- Иерархическая структура (родительские и дочерние пункты)
- Связь с категориями товаров
- Настройка порядка отображения
- Управление видимостью пунктов

**Типы пунктов навигации:**
- `category` - Категория товаров (связывается с существующей категорией)
- `page` - Страница сайта
- `external` - Внешняя ссылка
- `custom` - Произвольная ссылка

**Поля пункта навигации:**
- Название (обязательно)
- URL (обязательно)
- Тип пункта
- Связанная категория (если тип = category)
- Родительский пункт (для создания подменю)
- Порядок сортировки
- Статус активности
- Цель ссылки (_self или _blank)
- CSS класс для дополнительных стилей
- Иконка

**Подменю:**
- Возможность создания выпадающих списков
- Каждый пункт подменю имеет название, URL и статус активности

**Разрешения:** `website.navigation`

#### 4. Страницы сайта

**Путь:** `/pages` в админ панели

**Функционал:**
- Создание и редактирование статических страниц
- Управление контентом страниц
- SEO настройки для каждой страницы
- Выбор шаблона отображения

**Поля страницы:**
- Заголовок страницы (обязательно)
- URL (slug) - обязательно, используется для формирования адреса
- Краткое описание (excerpt)
- Содержимое страницы (обязательно)
- Статус активности
- Meta title (для SEO)
- Meta description (для SEO)
- Meta keywords (для SEO)
- Шаблон отображения

**Примеры страниц:**
- О компании
- Контакты
- Доставка и оплата
- Политика конфиденциальности
- Пользовательское соглашение

**Разрешения:** `website.pages`

---

## Главная страница

### Структура главной страницы

Главная страница (`/`) состоит из нескольких секций, которые можно настраивать через админ панель.

### Основные секции

#### 1. Hero секция (Слайдер)

**Функционал:**
- Отображение баннеров с позицией `main`
- Автоматическое переключение слайдов
- Кнопки призыва к действию (CTA)
- Адаптивные изображения для мобильных устройств

**Настройка:**
- Баннеры настраиваются в разделе "Баннеры" админ панели
- Позиция баннера должна быть установлена как `main`
- Баннеры отображаются в порядке, указанном в поле "Порядок сортировки"

**Поля баннера для главной:**
- Заголовок
- Подзаголовок
- Описание
- Текст кнопки
- Ссылка кнопки
- Изображение для десктопа
- Изображение для мобильных

#### 2. Секция рекомендуемых товаров

**Функционал:**
- Отображение товаров с флагом `featured = true`
- Автоматическая загрузка из API
- Отображение до 8 товаров
- Ссылки на страницы товаров

**Настройка:**
- Товары помечаются как рекомендуемые в разделе "Товары"
- Устанавливается флаг `featured = true`
- Товары автоматически появляются на главной странице

#### 3. Секция категорий

**Функционал:**
- Отображение основных категорий товаров
- Показ изображений категорий
- Количество товаров в категории
- Ссылки на страницы категорий

**Настройка:**
- Категории настраиваются в разделе "Категории"
- На главной отображаются только родительские категории (без parentId)
- Показываются первые 5 категорий
- Используется изображение категории или баннер

#### 4. Дополнительные секции

**Преимущества компании:**
- Блоки с иконками и описаниями
- Настраиваются через настройки сайта
- Примеры: "Бесплатная доставка", "Гарантия качества", "Быстрая обработка заказов"

**Отзывы клиентов:**
- Отображение отзывов о товарах
- Настраивается через раздел "Отзывы"

### API для главной страницы

Главная страница использует следующие API endpoints:

**Получение рекомендуемых товаров:**
```
GET /api/products?featured=true&limit=8
```

**Получение категорий для навигации:**
```
GET /api/categories/navigation
```

**Получение баннеров:**
```
GET /api/banners?position=main&isActive=true
```

### Настройка через админ панель

Для настройки главной страницы используйте:
1. **Баннеры** - для управления слайдером
2. **Категории** - для управления отображаемыми категориями
3. **Товары** - для управления рекомендуемыми товарами (установка флага `featured`)
4. **Настройки сайта** - для настройки дополнительных секций

---

## Фильтры для товаров

### Обзор системы фильтрации

Система фильтрации позволяет пользователям находить нужные товары по различным критериям на страницах категорий и в каталоге.

### Типы фильтров

#### 1. Фильтр по цене

**Функционал:**
- Указание диапазона цен (от и до)
- Автоматическая фильтрация товаров
- Валидация введенных значений

**Использование:**
- Пользователь вводит минимальную и максимальную цену
- Товары фильтруются в реальном времени
- Поддерживается фильтрация как на клиенте, так и через API

**API параметры:**
```
GET /api/products?minPrice=100&maxPrice=500
```

#### 2. Фильтр по цвету

**Функционал:**
- Выбор одного или нескольких цветов
- Множественный выбор
- Визуальное отображение выбранных цветов

**Доступные цвета:**
- Красный
- Синий
- Розовый
- Золотой
- Серебряный
- Зеленый

**Реализация:**
- Цвета хранятся в поле `attributes` товара или в специальном поле `colors`
- Фильтрация происходит по совпадению значений

#### 3. Фильтр по материалу

**Функционал:**
- Выбор материала товара
- Множественный выбор
- Примеры: латекс, фольга, майлар

**Реализация:**
- Материалы хранятся в атрибутах товара
- Фильтрация по полю `attributes.material`

#### 4. Фильтр по наличию

**Функционал:**
- Показ только товаров в наличии
- Переключатель "Только в наличии"
- Автоматическое скрытие отсутствующих товаров

**API параметры:**
```
GET /api/products?inStock=true
```

#### 5. Фильтр по объему (для стаканчиков)

**Функционал:**
- Выбор объема товара
- Множественный выбор
- Примеры: 1л, 2л, 5л

**Реализация:**
- Объемы хранятся в атрибутах товара
- Фильтрация по полю `attributes.volume`

#### 6. Фильтр по типу подарка

**Функционал:**
- Выбор типа подарка
- Множественный выбор
- Примеры: букет, композиция, набор

**Реализация:**
- Типы хранятся в атрибутах товара
- Фильтрация по полю `attributes.giftType`

#### 7. Фильтр "С гелием"

**Функционал:**
- Показ только товаров, которые можно наполнить гелием
- Переключатель
- Фильтрация по атрибуту `withHelium`

### Компоненты фильтрации

#### SidebarFilters

**Расположение:** Боковая панель на страницах категорий

**Функционал:**
- Отображение всех доступных фильтров
- Применение фильтров в реальном времени
- Сброс всех фильтров
- Показ количества активных фильтров

**Использование:**
```typescript
<SidebarFilters
  categoryKey="balloons"
  config={filterConfig}
  onFiltersChange={(filters) => {
    // Обработка изменения фильтров
  }}
/>
```

#### FilterModal

**Расположение:** Модальное окно для мобильных устройств

**Функционал:**
- Все фильтры в одном месте
- Удобный интерфейс для мобильных
- Кнопки "Применить" и "Сбросить"

#### Сортировка товаров

**Доступные варианты:**
- По популярности (по умолчанию)
- Сначала дешевые (цена по возрастанию)
- Сначала дорогие (цена по убыванию)
- По названию А-Я
- По названию Я-А
- Новинки (по дате создания)

**API параметры:**
```
GET /api/products?sortBy=price&sortOrder=asc
GET /api/products?sortBy=createdAt&sortOrder=desc
```

### Настройка фильтров для категорий

Фильтры можно настроить индивидуально для каждой категории через поле `filters` в модели Category:

```json
{
  "filters": {
    "showPriceFilter": true,
    "showColorFilter": true,
    "showMaterialFilter": true,
    "showVolumeFilter": false,
    "showGiftTypeFilter": false,
    "showHeliumFilter": true,
    "availableColors": ["red", "blue", "pink", "gold"],
    "availableMaterials": ["latex", "foil", "mylar"]
  }
}
```

### API для фильтрации

**Комбинированные фильтры:**
```
GET /api/products?categoryId=uuid&minPrice=100&maxPrice=500&inStock=true&sortBy=price&sortOrder=asc
```

**Поиск с фильтрами:**
```
GET /api/products?search=шар&minPrice=50&maxPrice=200&inStock=true
```

### Примеры использования

**Фильтрация фольгированных шаров по цене:**
```
GET /api/products?categoryId=foil-balloons&minPrice=100&maxPrice=300
```

**Поиск красных шаров в наличии:**
```
GET /api/products?search=шар&attributes.colors=red&inStock=true
```

**Сортировка новинок:**
```
GET /api/products?sortBy=createdAt&sortOrder=desc&limit=20
```

---

## Создание PDF при покупке

### Обзор функционала

При успешной покупке товара система автоматически генерирует PDF документы для клиента и администрации.

### Типы PDF документов

#### 1. Счет-фактура (Invoice) для клиента

**Когда создается:** После успешной оплаты заказа (статус `PAID`)

**Содержимое:**
- Информация о компании (название, адрес, контакты)
- Номер счета-фактуры
- Дата создания
- Данные клиента:
  - ФИО
  - Телефон
  - Email
  - Адрес доставки
- Детали заказа:
  - Номер заказа
  - Список товаров с количеством и ценами
  - Стоимость товаров
  - Скидка (если есть)
  - Стоимость доставки
  - Итоговая сумма
- Способ оплаты
- Статус заказа
- QR-код для быстрого доступа к заказу

**Формат файла:** `invoice_{orderNumber}.pdf`

**Расположение:** Сохраняется в `/uploads/invoices/`

**Отправка клиенту:**
- Автоматическая отправка на email клиента
- Ссылка для скачивания в личном кабинете
- Ссылка в SMS уведомлении (опционально)

#### 2. Накладная (Packing Slip) для доставки

**Когда создается:** При изменении статуса заказа на `SHIPPED` или `READY`

**Содержимое:**
- Номер накладной
- Дата создания
- Данные клиента (имя, телефон, адрес доставки)
- Список товаров с количеством
- Особые указания (если есть)
- Контактная информация для связи

**Формат файла:** `packing_slip_{orderNumber}.pdf`

**Расположение:** Сохраняется в `/uploads/packing-slips/`

**Использование:**
- Печать для курьера
- Прикрепление к посылке
- Отправка клиенту для отслеживания

#### 3. Отчет о продаже для администрации

**Когда создается:** После завершения заказа (статус `DELIVERED`)

**Содержимое:**
- Полная информация о заказе
- Данные клиента
- История изменений статуса
- Финансовая информация
- Менеджер, обработавший заказ
- Время обработки заказа

**Формат файла:** `order_report_{orderNumber}.pdf`

**Расположение:** Сохраняется в `/uploads/reports/`

**Доступ:** Только для администраторов с разрешением `orders.view`

### API для работы с PDF

#### GET /orders/:id/invoice
Генерация и скачивание счета-фактуры

**Требования:**
- Авторизация (JWT токен)
- Разрешение: `orders.view` или доступ к своему заказу (для клиентов)

**Ответ:**
- PDF файл в формате `application/pdf`
- Заголовок: `Content-Disposition: attachment; filename="invoice_{orderNumber}.pdf"`

**Пример:**
```
GET /api/orders/123e4567-e89b-12d3-a456-426614174000/invoice
Authorization: Bearer {token}
```

#### GET /orders/:id/packing-slip
Генерация и скачивание накладной

**Требования:**
- Авторизация (JWT токен)
- Разрешение: `orders.view`

**Ответ:**
- PDF файл в формате `application/pdf`

**Пример:**
```
GET /api/orders/123e4567-e89b-12d3-a456-426614174000/packing-slip
Authorization: Bearer {token}
```

#### GET /orders/:id/report
Генерация и скачивание отчета о продаже

**Требования:**
- Авторизация (JWT токен)
- Разрешение: `orders.view` и `analytics.view`

**Ответ:**
- PDF файл в формате `application/pdf`

**Пример:**
```
GET /api/orders/123e4567-e89b-12d3-a456-426614174000/report
Authorization: Bearer {token}
```

### Автоматическая генерация PDF

PDF документы создаются автоматически в следующих случаях:

1. **При оплате заказа:**
   - Статус `paymentStatus` меняется на `PAID`
   - Автоматически генерируется счет-фактура
   - Отправляется на email клиента

2. **При отправке заказа:**
   - Статус `status` меняется на `SHIPPED` или `READY`
   - Автоматически генерируется накладная
   - Доступна для скачивания в админ панели

3. **При завершении заказа:**
   - Статус `status` меняется на `DELIVERED`
   - Автоматически генерируется отчет о продаже
   - Сохраняется в архиве для аналитики

### Настройка шаблонов PDF

Шаблоны PDF документов настраиваются через админ панель в разделе "Настройки сайта" → "Шаблоны документов".

**Доступные настройки:**
- Логотип компании на документах
- Цветовая схема
- Формат номера документа
- Дополнительные поля
- Язык документов

### Технические детали

**Библиотека для генерации PDF:**
- Рекомендуется использовать `pdfkit` или `puppeteer` для Node.js
- Альтернатива: `@react-pdf/renderer` для React-компонентов

**Структура файлов:**
```
uploads/
  ├── invoices/
  │   └── invoice_ORD-12345678.pdf
  ├── packing-slips/
  │   └── packing_slip_ORD-12345678.pdf
  └── reports/
      └── order_report_ORD-12345678.pdf
```

**Хранение:**
- PDF файлы хранятся на сервере
- Ссылки на файлы сохраняются в базе данных (поле `documents` в модели Order)
- Автоматическая очистка старых файлов (настраивается)

---

## Аналитика заказов и продаж

### Обзор функционала

Система аналитики предоставляет детальную информацию о продажах, заказах и поведении клиентов.

**Доступ:** Раздел "Аналитика" в админ панели (`/analytics`)

**Разрешения:** `analytics.view`

### Основные метрики

#### 1. Общая статистика

**Endpoint:** `GET /api/stats`

**Доступные метрики:**
- **Всего пользователей** - общее количество зарегистрированных пользователей
- **Всего заказов** - общее количество созданных заказов
- **Всего товаров** - количество активных товаров в каталоге
- **Всего клиентов** - количество клиентов (роль CUSTOMER)
- **Выручка** - сумма всех завершенных заказов (статус DELIVERED)
- **Новые пользователи** - количество пользователей за последние 30 дней
- **Завершенные заказы** - количество заказов со статусом DELIVERED

**Пример ответа:**
```json
{
  "success": true,
  "data": {
    "totalUsers": 150,
    "totalOrders": 342,
    "totalProducts": 89,
    "totalCustomers": 120,
    "revenue": 125000.50,
    "newUsers": 25,
    "completedOrders": 298
  }
}
```

#### 2. Аналитика по заказам

**Доступные отчеты:**

**По статусам заказов:**
- Новые заказы (NEW)
- Подтвержденные (CONFIRMED)
- В обработке (PROCESSING)
- Готовы к отправке (READY)
- Отправленные (SHIPPED)
- Доставленные (DELIVERED)
- Отмененные (CANCELLED)
- Возвращенные (REFUNDED)

**По статусам оплаты:**
- Ожидающие оплаты (PENDING)
- Оплаченные (PAID)
- Ошибка оплаты (FAILED)
- Возврат средств (REFUNDED)
- Частичный возврат (PARTIALLY_REFUNDED)

**По периодам:**
- За сегодня
- За неделю
- За месяц
- За квартал
- За год
- Произвольный период (дата от - дата до)

**По источникам:**
- Сайт (website)
- Телефонный звонок (phone)
- Социальные сети (social)
- Другое

#### 3. Финансовая аналитика

**Метрики:**
- Общая выручка
- Выручка по периодам (день, неделя, месяц)
- Средний чек
- Количество транзакций
- Сумма скидок
- Стоимость доставки
- Чистая прибыль (выручка - скидки - доставка)

**Графики:**
- Динамика продаж по дням/неделям/месяцам
- Сравнение периодов
- Тренды продаж

#### 4. Аналитика товаров

**Популярные товары:**
- Товары с наибольшим количеством заказов
- Товары с наибольшей выручкой
- Товары с наивысшим рейтингом

**Метрики по товарам:**
- Количество проданных единиц
- Выручка от каждого товара
- Средняя цена продажи
- Конверсия просмотров в покупки

**Категории:**
- Продажи по категориям
- Популярные категории
- Средний чек по категориям

#### 5. Аналитика клиентов

**Метрики:**
- Количество новых клиентов
- Количество активных клиентов
- Средний чек клиента
- Повторные покупки
- Клиенты с наибольшими покупками

**Сегментация:**
- По сумме покупок
- По частоте заказов
- По категориям интересов

### События аналитики

Система автоматически записывает события в таблицу `Analytics`:

**Типы событий:**
- `order.created` - создан новый заказ
- `order.paid` - заказ оплачен
- `order.delivered` - заказ доставлен
- `order.cancelled` - заказ отменен
- `product.viewed` - просмотр товара
- `product.added_to_cart` - товар добавлен в корзину
- `search` - поисковый запрос
- `page.viewed` - просмотр страницы

**Структура события:**
```json
{
  "event": "order.created",
  "data": {
    "orderId": "uuid",
    "orderNumber": "ORD-12345678",
    "totalAmount": 1500.00,
    "customerId": "uuid",
    "itemsCount": 3
  },
  "ip": "192.168.1.1",
  "userAgent": "Mozilla/5.0...",
  "createdAt": "2025-01-15T10:30:00Z"
}
```

### API для аналитики

#### GET /api/stats
Получение общей статистики

**Требования:**
- Авторизация (JWT токен)
- Разрешение: `analytics.view`

**Query параметры:**
- `period` - период (today, week, month, quarter, year)
- `dateFrom` - дата начала (формат: YYYY-MM-DD)
- `dateTo` - дата окончания (формат: YYYY-MM-DD)

**Пример:**
```
GET /api/stats?period=month
GET /api/stats?dateFrom=2025-01-01&dateTo=2025-01-31
```

#### GET /api/analytics/orders
Аналитика по заказам

**Query параметры:**
- `groupBy` - группировка (status, paymentStatus, date, source)
- `period` - период
- `dateFrom` - дата начала
- `dateTo` - дата окончания

**Пример:**
```
GET /api/analytics/orders?groupBy=status&period=month
```

#### GET /api/analytics/products
Аналитика по товарам

**Query параметры:**
- `limit` - количество товаров (по умолчанию 10)
- `sortBy` - сортировка (sales, revenue, rating)
- `period` - период

**Пример:**
```
GET /api/analytics/products?limit=20&sortBy=revenue&period=month
```

#### GET /api/analytics/customers
Аналитика по клиентам

**Query параметры:**
- `limit` - количество клиентов
- `sortBy` - сортировка (totalSpent, orderCount, lastOrderDate)

**Пример:**
```
GET /api/analytics/customers?limit=10&sortBy=totalSpent
```

### Экспорт данных

**Доступные форматы:**
- CSV - для Excel и других табличных редакторов
- PDF - для печати и архива
- JSON - для программной обработки

**Типы отчетов:**
- Отчет по продажам
- Отчет по товарам
- Отчет по клиентам
- Финансовый отчет
- Отчет по периодам

**Генерация отчетов:**
- Через админ панель: раздел "Аналитика" → "Экспорт"
- Через API: `GET /api/analytics/export?type=sales&format=csv`

### Дашборд аналитики

**Расположение:** `/analytics` в админ панели

**Компоненты:**
- Карточки с ключевыми метриками
- Графики динамики продаж
- Таблицы популярных товаров
- Список последних заказов
- Фильтры по периодам

**Обновление данных:**
- Автоматическое обновление каждые 5 минут
- Ручное обновление кнопкой "Обновить"
- Настройка периода отображения

### Настройка аналитики

**Интеграции:**
- Google Analytics - для веб-аналитики
- Яндекс.Метрика - для отслеживания посетителей
- Facebook Pixel - для рекламных кампаний

**Настройка через админ панель:**
- Раздел "Настройки сайта" → "SEO и аналитика"
- Ввод ID сервисов аналитики
- Автоматическое добавление кодов на сайт

---

## Управление заказами

### Обзор функционала

Админ панель предоставляет полный контроль над всеми заказами интернет-магазина.

**Доступ:** Раздел "Заказы" в админ панели (`/orders`)

**Разрешения:** `orders.view`, `orders.edit`, `orders.create`, `orders.delete`

### Основные возможности

#### 1. Просмотр списка заказов

**Функционал:**
- Таблица со всеми заказами
- Фильтрация по:
  - Номеру заказа
  - Имени клиента
  - Телефону клиента
  - Статусу заказа
  - Статусу оплаты
  - Периоду (дата от - дата до)
- Сортировка по дате, сумме, статусу
- Пагинация (25 заказов на страницу)

**Отображаемые поля:**
- Номер заказа
- Дата создания
- Клиент (имя, телефон)
- Менеджер (если назначен)
- Статус заказа
- Статус оплаты
- Сумма заказа
- Количество товаров

#### 2. Просмотр детальной информации о заказе

**Функционал:**
- Полная информация о заказе
- Список товаров с количеством и ценами
- Данные клиента
- Адрес доставки
- История изменений статуса
- Примечания менеджера
- Финансовая информация (сумма, скидка, доставка)

#### 3. Редактирование заказа

**Доступные действия:**
- Изменение статуса заказа
- Изменение статуса оплаты
- Назначение менеджера
- Добавление примечаний менеджера
- Изменение даты доставки
- Добавление/удаление товаров (опционально)

**Статусы заказа:**
- `NEW` - Новый заказ
- `CONFIRMED` - Подтвержден
- `PROCESSING` - В обработке
- `READY` - Готов к отправке
- `SHIPPED` - Отправлен
- `DELIVERED` - Доставлен
- `CANCELLED` - Отменен
- `REFUNDED` - Возвращен

**Статусы оплаты:**
- `PENDING` - Ожидает оплаты
- `PAID` - Оплачен
- `FAILED` - Ошибка оплаты
- `REFUNDED` - Возврат средств
- `PARTIALLY_REFUNDED` - Частичный возврат

#### 4. История изменений

**Функционал:**
- Автоматическое логирование всех изменений статуса
- Отображение пользователя, который изменил статус
- Комментарии к изменениям
- Временные метки

### API для заказов

#### GET /orders
Получение списка заказов

**Query параметры:**
- `page` - номер страницы
- `limit` - количество на странице
- `search` - поиск по номеру, имени, телефону
- `status` - фильтр по статусу
- `paymentStatus` - фильтр по статусу оплаты
- `dateFrom` - дата начала
- `dateTo` - дата окончания
- `sortBy` - поле сортировки
- `sortOrder` - порядок сортировки

#### GET /orders/:id
Получение заказа по ID

#### PATCH /orders/:id/status
Изменение статуса заказа

**Тело запроса:**
```json
{
  "status": "CONFIRMED",
  "paymentStatus": "PAID",
  "managerNotes": "Заказ подтвержден, оплата получена"
}
```

---

## Управление клиентами

### Обзор функционала

Система управления клиентской базой с полной информацией о покупателях.

**Доступ:** Раздел "Клиенты" в админ панели (`/customers`)

**Разрешения:** `customers.view`, `customers.edit`, `customers.delete`

### Основные возможности

#### 1. Просмотр списка клиентов

**Функционал:**
- Таблица всех клиентов
- Поиск по имени, email, телефону
- Фильтрация по тегам
- Сортировка по дате регистрации
- Пагинация

**Отображаемые поля:**
- Дата регистрации
- Имя
- Email
- Телефон
- Адрес
- Теги
- Статистика (количество заказов, отзывов)
- Статус активности

#### 2. Просмотр детальной информации

**Информация о клиенте:**
- Основные данные (имя, email, телефон, адрес)
- Примечания
- Теги для сегментации
- Статистика:
  - Количество заказов
  - Количество отзывов
  - Количество обратных звонков
- История активности
- Дата регистрации и последнего обновления

#### 3. Редактирование клиента

**Доступные действия:**
- Изменение контактных данных
- Добавление/редактирование примечаний
- Управление тегами
- Изменение статуса активности
- Просмотр связанных заказов
- Просмотр отзывов клиента

**Теги клиентов:**
- Используются для сегментации
- Примеры: "VIP", "Постоянный клиент", "Оптовый покупатель"
- Можно добавлять произвольные теги

### API для клиентов

#### GET /customers
Получение списка клиентов

**Query параметры:**
- `page` - номер страницы
- `limit` - количество на странице
- `search` - поиск по имени, email, телефону

#### GET /customers/:id
Получение клиента по ID

#### PUT /customers/:id
Обновление данных клиента

**Тело запроса:**
```json
{
  "name": "Иван Иванов",
  "email": "ivan@example.com",
  "phone": "+380501234567",
  "address": "г. Киев, ул. Примерная, 1",
  "notes": "Постоянный клиент",
  "tags": ["VIP", "Постоянный клиент"]
}
```

---

## Система отзывов и комментариев

### Обзор функционала

Система модерации отзывов и комментариев от клиентов.

**Доступ:** Раздел "Отзывы" в админ панели (`/comments`)

**Разрешения:** `reviews.view`, `reviews.edit`, `reviews.delete`

### Основные возможности

#### 1. Просмотр отзывов

**Функционал:**
- Список всех отзывов и комментариев
- Фильтрация по статусу
- Поиск по имени клиента или товару
- Сортировка по дате

**Отображаемые поля:**
- Дата отзыва
- Имя комментатора
- Товар
- Рейтинг (звезды 1-5)
- Текст комментария
- Статус модерации
- Шаблон/категория

#### 2. Модерация отзывов

**Статусы отзывов:**
- `PENDING` - На модерации (по умолчанию)
- `APPROVED` - Одобрен (публикуется на сайте)
- `REJECTED` - Отклонен (не публикуется)

**Действия модератора:**
- Одобрение отзыва
- Отклонение отзыва
- Редактирование текста (опционально)
- Удаление отзыва

#### 3. Редактирование отзыва

**Доступные поля:**
- Дата отзыва
- Имя клиента
- Название товара
- Рейтинг (1-5 звезд)
- Текст комментария
- Статус модерации
- Шаблон/категория отзыва

### Структура отзыва

**Модель Review:**
- Связь с товаром (productId)
- Связь с клиентом (customerId, опционально)
- Имя и email (для анонимных отзывов)
- Рейтинг (1-5)
- Текст комментария
- Статус модерации
- ID модератора
- Дата модерации

### API для отзывов

#### GET /reviews
Получение списка отзывов

**Query параметры:**
- `productId` - фильтр по товару
- `status` - фильтр по статусу
- `page` - номер страницы
- `limit` - количество на странице

#### PATCH /reviews/:id/status
Изменение статуса отзыва

**Тело запроса:**
```json
{
  "status": "APPROVED",
  "moderatorId": "uuid"
}
```

---

## Обратные звонки

### Обзор функционала

Система управления заявками на обратный звонок от клиентов.

**Доступ:** Раздел "Обратные звонки" в админ панели (`/callbacks`)

**Разрешения:** `callbacks.view`, `callbacks.edit`

### Основные возможности

#### 1. Просмотр заявок

**Функционал:**
- Список всех заявок на обратный звонок
- Фильтрация по статусу и приоритету
- Поиск по имени, телефону, email
- Сортировка по дате создания

**Отображаемые поля:**
- Дата создания
- Имя клиента
- Телефон
- Email
- Сообщение
- Статус
- Приоритет
- Назначенный менеджер
- Источник заявки

#### 2. Управление заявками

**Статусы:**
- `NEW` - Новая заявка
- `IN_PROGRESS` - В работе
- `COMPLETED` - Завершена
- `CANCELLED` - Отменена

**Приоритеты:**
- `LOW` - Низкий
- `MEDIUM` - Средний
- `HIGH` - Высокий
- `URGENT` - Срочный

**Действия:**
- Изменение статуса
- Назначение приоритета
- Назначение менеджера
- Добавление примечаний
- Планирование звонка (дата и время)
- Отметка о завершении

#### 3. Редактирование заявки

**Поля:**
- Основная информация (имя, телефон, email, сообщение)
- Статус и приоритет
- Назначенный менеджер
- Запланированное время звонка
- Примечания менеджера
- Дата завершения

### API для обратных звонков

#### GET /callbacks
Получение списка заявок

**Query параметры:**
- `status` - фильтр по статусу
- `priority` - фильтр по приоритету
- `managerId` - фильтр по менеджеру
- `search` - поиск

#### POST /callbacks
Создание новой заявки (для фронтенда)

**Тело запроса:**
```json
{
  "name": "Иван Иванов",
  "phone": "+380501234567",
  "email": "ivan@example.com",
  "message": "Хочу узнать о наличии товара",
  "source": "website"
}
```

#### PATCH /callbacks/:id
Обновление заявки

**Тело запроса:**
```json
{
  "status": "IN_PROGRESS",
  "priority": "HIGH",
  "managerId": "uuid",
  "notes": "Клиент заинтересован в оптовой покупке"
}
```

---

## Корзина и оформление заказа

### Обзор функционала

Система корзины покупок и процесс оформления заказа на фронтенде.

**URL корзины:** `/cart`

**URL оформления:** `/checkout`

### Функционал корзины

#### 1. Добавление товаров в корзину

**Способы добавления:**
- С страницы товара (кнопка "В корзину")
- Быстрый заказ
- С карточки товара в каталоге

**Хранение:**
- Корзина хранится в `localStorage` браузера
- Ключ: `cart`
- Формат: JSON массив товаров

**Структура товара в корзине:**
```typescript
{
  id: string;              // ID товара
  name: string;           // Название
  price: number;          // Цена
  image: string;          // Изображение
  quantity: number;       // Количество
  attributes: {           // Атрибуты
    color?: string;
    size?: string;
    withHelium?: boolean;
  }
}
```

#### 2. Управление корзиной

**Доступные действия:**
- Изменение количества товаров
- Удаление товаров
- Очистка корзины
- Просмотр итоговой суммы
- Расчет доставки

**Автоматические функции:**
- Объединение одинаковых товаров
- Пересчет суммы при изменении количества
- Валидация наличия товара
- Проверка минимального количества

#### 3. Страница корзины

**Отображаемая информация:**
- Список товаров с изображениями
- Название и цена каждого товара
- Количество с кнопками +/- 
- Возможность удаления
- Итоговая сумма
- Информация о доставке
- Кнопка "Оформить заказ"

### Процесс оформления заказа

#### Шаг 1: Данные клиента

**Обязательные поля:**
- Имя
- Телефон
- Email (опционально)

**Дополнительные поля:**
- Адрес доставки
- Комментарий к заказу

#### Шаг 2: Способ доставки

**Доступные варианты:**
- Курьерская доставка
- Самовывоз
- Почта

**Настройка:**
- Стоимость доставки
- Сроки доставки
- Условия бесплатной доставки

#### Шаг 3: Способ оплаты

**Доступные варианты:**
- Наличными при получении
- Картой при получении
- Онлайн оплата (Monobank, PrivatBank, LiqPay, Fondy)
- Безналичный расчет

#### Шаг 4: Подтверждение

**Проверка:**
- Корректность данных
- Наличие товаров
- Итоговая сумма

**Создание заказа:**
- Отправка данных на API
- Получение номера заказа
- Редирект на страницу подтверждения

### API для заказов

#### POST /orders
Создание нового заказа

**Тело запроса:**
```json
{
  "customer": {
    "name": "Иван Иванов",
    "phone": "+380501234567",
    "email": "ivan@example.com",
    "address": "г. Киев, ул. Примерная, 1"
  },
  "items": [
    {
      "productId": "uuid",
      "quantity": 2,
      "price": 150
    }
  ],
  "shippingAddress": {
    "city": "Киев",
    "street": "ул. Примерная, 1",
    "apartment": "10"
  },
  "paymentMethod": "monobank",
  "shippingMethod": "courier",
  "notes": "Позвонить перед доставкой"
}
```

**Ответ:**
```json
{
  "success": true,
  "data": {
    "id": "uuid",
    "orderNumber": "ORD-12345678",
    "status": "NEW",
    "totalAmount": 300
  }
}
```

---

## Система ролей и разрешений

### Обзор

Система обеспечивает гибкое управление доступом к функциям админ панели через роли и разрешения.

### Роли пользователей

#### 1. SUPER_ADMIN (Супер администратор)

**Полный доступ ко всем функциям системы:**
- Управление пользователями
- Управление товарами и категориями
- Управление заказами
- Управление клиентами
- Управление контентом сайта
- Настройки системы
- Просмотр аналитики
- Просмотр логов
- Управление API ключами
- Полный доступ к безопасности

**Разрешения:**
- `admin.full_access` - полный доступ
- Все остальные разрешения

#### 2. ADMINISTRATOR (Администратор)

**Доступ к основным функциям:**
- Управление товарами и категориями
- Управление пользователями (создание, редактирование, просмотр)
- Управление контентом сайта (баннеры, страницы, навигация)
- Просмотр аналитики
- Управление клиентами
- Управление заказами
- Модерация отзывов

**Разрешения:**
- `products.*`
- `categories.*`
- `users.create`, `users.edit`, `users.view`
- `website.*`
- `analytics.view`
- `customers.*`
- `orders.*`
- `reviews.*`

#### 3. MANAGER (Менеджер)

**Доступ к операционным функциям:**
- Управление заказами (просмотр, редактирование, создание)
- Управление обратными звонками
- Модерация отзывов
- Управление клиентами
- Просмотр товаров
- Базовая аналитика

**Разрешения:**
- `orders.view`, `orders.edit`, `orders.create`
- `callbacks.*`
- `reviews.*`
- `customers.*`
- `products.view`
- `analytics.basic`

#### 4. CRM_MANAGER (CRM менеджер)

**Доступ к клиентским функциям:**
- Управление клиентами
- Управление промо-акциями
- Отправка email
- Управление программой лояльности
- Маркетинговая аналитика
- Просмотр заказов
- Управление обратными звонками

**Разрешения:**
- `customers.*`
- `promotions.*`
- `emails.send`
- `loyalty.manage`
- `analytics.marketing`
- `orders.view`
- `callbacks.*`

### Система разрешений

**Структура разрешений:**
- Формат: `resource.action` или `resource.subresource.action`
- Примеры: `products.create`, `orders.view`, `website.banners`

**Типы действий:**
- `view` - просмотр
- `create` - создание
- `edit` - редактирование
- `delete` - удаление
- `manage` - полное управление

**Группы разрешений:**

**Товары:**
- `products.view` - просмотр товаров
- `products.create` - создание товаров
- `products.edit` - редактирование товаров
- `products.delete` - удаление товаров

**Заказы:**
- `orders.view` - просмотр заказов
- `orders.create` - создание заказов
- `orders.edit` - редактирование заказов
- `orders.delete` - удаление заказов

**Клиенты:**
- `customers.view` - просмотр клиентов
- `customers.edit` - редактирование клиентов
- `customers.delete` - удаление клиентов

**Сайт:**
- `website.banners` - управление баннерами
- `website.pages` - управление страницами
- `website.navigation` - управление навигацией
- `website.settings` - настройки сайта

**Аналитика:**
- `analytics.view` - просмотр аналитики
- `analytics.basic` - базовая аналитика
- `analytics.marketing` - маркетинговая аналитика

**Безопасность:**
- `admin.full_access` - полный доступ
- `logs.view` - просмотр логов
- `api_keys.manage` - управление API ключами

### Кастомные разрешения

**Функционал:**
- Возможность добавления кастомных разрешений для пользователя
- Поле `customPermissions` в модели User
- Переопределение стандартных разрешений роли

**Использование:**
- Для специальных случаев
- Временные расширенные права
- Индивидуальная настройка доступа

### Проверка разрешений

**На уровне API:**
- Использование декоратора `@RequirePermissions('permission.name')`
- Guard `PermissionsGuard` проверяет наличие разрешения
- При отсутствии - ошибка 403 Forbidden

**На уровне фронтенда:**
- Компонент `PermissionGuard` скрывает элементы интерфейса
- Хук `usePermissions()` для проверки в компонентах
- Автоматическое скрытие меню без доступа

### Примеры использования

**В контроллере:**
```typescript
@Get()
@UseGuards(JwtAuthGuard, PermissionsGuard)
@RequirePermissions('orders.view')
async getOrders() {
  // ...
}
```

**В компоненте React:**
```typescript
const { permissions } = usePermissions();

if (permissions.includes('products.create')) {
  // Показать кнопку создания
}
```

---

## API Endpoints

### Базовый URL
```
http://localhost:3001/api
```

### Аутентификация

#### POST /auth/login
Вход в систему (админ панель)

**Тело запроса:**
```json
{
  "username": "admin",
  "password": "password123",
  "twoFactorCode": "123456"  // опционально
}
```

**Ответ:**
```json
{
  "success": true,
  "data": {
    "user": { ... },
    "token": "jwt-token",
    "refreshToken": "refresh-token"
  }
}
```

#### POST /auth/logout
Выход из системы (требует авторизации)

#### GET /auth/me
Получение информации о текущем пользователе (требует авторизации)

#### POST /auth/refresh
Обновление access token через refresh token

**Тело запроса:**
```json
{
  "refreshToken": "refresh-token"
}
```

### Товары (Products)

#### GET /products
Получение списка товаров

**Query параметры:**
- `page` - номер страницы (по умолчанию 1)
- `limit` - количество на странице (по умолчанию 25)
- `search` - поисковый запрос
- `categoryId` - фильтр по категории
- `sortBy` - поле для сортировки (price, title, createdAt)
- `sortOrder` - порядок сортировки (asc, desc)

**Пример:**
```
GET /api/products?page=1&limit=10&search=шар&categoryId=uuid
```

**Ответ:**
```json
{
  "success": true,
  "data": [
    {
      "id": "uuid",
      "title": "Фольгированный шар",
      "price": 150,
      "category": { ... },
      ...
    }
  ],
  "pagination": {
    "page": 1,
    "limit": 10,
    "total": 100,
    "totalPages": 10
  }
}
```

#### GET /products/:id
Получение товара по ID

**Ответ:**
```json
{
  "success": true,
  "data": {
    "id": "uuid",
    "title": "Фольгированный шар",
    ...
  }
}
```

#### POST /products
Создание нового товара (требует авторизации и разрешения `products.create`)

**Тело запроса:**
```json
{
  "title": "Новый товар",
  "price": 200,
  "categoryId": "uuid",
  "description": "Описание товара",
  "brand": "Бренд",
  "sku": "SKU-001",
  "isActive": true,
  "inStock": true,
  "stockQuantity": 10
}
```

#### PUT /products/:id
Обновление товара (требует авторизации и разрешения `products.edit`)

**Тело запроса:** (все поля опциональны, кроме обязательных)
```json
{
  "title": "Обновленное название",
  "price": 250,
  "discount": 10
}
```

#### DELETE /products/:id
Удаление товара (требует авторизации и разрешения `products.delete`)

**Ответ:**
```json
{
  "success": true,
  "message": "Product deleted successfully"
}
```

#### GET /products/popular-queries
Получение популярных поисковых запросов

**Query параметры:**
- `limit` - количество запросов (по умолчанию 6)

**Ответ:**
```json
{
  "success": true,
  "data": [
    "фольгированные шары",
    "букеты из шаров",
    "день рождения"
  ]
}
```

### Загрузка изображений

Изображения товаров загружаются через админ панель и сохраняются в:
```
/api/uploads/products/
```

Доступ к изображениям:
```
http://localhost:3001/uploads/products/{filename}
```

---

## Технические детали

### Технологии

**Backend (API):**
- NestJS 10.3.0
- Prisma ORM
- PostgreSQL 15
- JWT для аутентификации
- bcrypt для хеширования паролей

**Admin Panel:**
- React 18.2.0
- React Admin 4.16.12
- Material-UI 5.15.13
- TypeScript

**Frontend (E-commerce):**
- Next.js 15.1.7
- React 18.2.0
- Tailwind CSS
- TypeScript

### Переменные окружения

**API (.env):**
```env
DATABASE_URL="postgresql://user:password@localhost:5432/balloonshop?schema=public"
JWT_SECRET="your-secret-key"
JWT_EXPIRES_IN="7d"
PORT=3001
NODE_ENV=development
FRONTEND_URL="http://localhost:3000,http://localhost:3010"
UPLOAD_PATH="./uploads"
```

### Порты

- **API:** 3001
- **Admin Panel:** 3000
- **E-commerce UI:** 3010

---

## Примеры использования

### Создание товара через API

```bash
curl -X POST http://localhost:3001/api/products \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -d '{
    "title": "Фольгированный шар 'День Рождения'",
    "price": 150,
    "categoryId": "category-uuid",
    "description": "Красивый фольгированный шар",
    "brand": "BalloonPro",
    "sku": "BALLOON-BD-001",
    "isActive": true,
    "inStock": true,
    "stockQuantity": 50
  }'
```

### Получение списка товаров

```bash
curl http://localhost:3001/api/products?page=1&limit=10&search=шар
```

### Вход в админ панель

```bash
curl -X POST http://localhost:3001/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{
    "username": "admin",
    "password": "admin123"
  }'
```

---

## Примечания

1. **Безопасность:** Все пароли хешируются с помощью bcrypt перед сохранением в БД
2. **Токены:** Access token действителен 7 дней, refresh token - 30 дней
3. **Валидация:** Все входные данные валидируются на уровне DTO
4. **Логирование:** Все действия администраторов логируются в таблицу `admin_logs`
5. **Изображения:** Поддерживаются форматы: JPG, PNG, WebP
6. **Размер изображений:** Рекомендуется не более 5MB на файл

---

## Поддержка

При возникновении вопросов или проблем обращайтесь к разработчикам проекта.

